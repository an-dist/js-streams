<!DOCTYPE html>
<html lang="en" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Streams(https://github.com/an-dist/js-streams) Demos and Examples">
<link rel="icon" href="/favicon.svg" type="image/svg+xml" sizes="any">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@primer/css@21.1.1/dist/primer.min.css">
<link rel="stylesheet" href="../../misc/DomConsole/DomConsole.css">
<link rel="stylesheet" href="../../misc/DomConsole/DomConsole.theme.chrome.css">
<title>DownloadStream</title>

<header class="Header">
  <div class="Header-item">
    <a href="/" style="color: white;"><h3>DownloadStream</h3></a>
  </div>
</header>

<main class="container-md mt-2">
  <input id="url" class="form-control input-block mb-2" type="url" value="https://jsonplaceholder.typicode.com/photos">
  <button id="download" class="btn">Download</button>
</main>

<script type="module">
  import { DownloadStream } from "../DownloadStream.js"

  document.getElementById("download").onclick = async () => {
    const url = document.getElementById("url")
    const readable = (await fetch(url.value, { credentials: "include" })).body
    await readable.pipeTo(new DownloadStream("photos.json"))
  }
</script>