{
  "version": 3,
  "sources": ["../PullPush/PullPush.ts", "../ArrayAccumulator/ArrayAccumulator.ts", "../ArrayBufferAccumulator/ArrayBufferAccumulator.ts", "../AssertStream/AssertStream.ts", "../CombinedTransformStream/CombinedTransformStream.ts", "../CsvLineEncoder/CsvLineEncoder.ts", "../Flattener/Flattener.ts", "../JsonDeserializer/JsonDeserializer.ts", "../JsonSerializer/JsonSerializer.ts", "../PeekStream/PeekStream.ts", "../PerformanceStream/PerformanceStream.ts", "../Utf8Streams/Utf8Streams.ts", "../misc/Environment/Environment.ts", "../funcs/sleep/sleep.ts", "../funcs/toAsyncIterableIterator/toAsyncIterableIterator.ts", "../DownloadStream/DownloadStream.ts", "../misc/DomConsole/DomConsole.ts"],
  "sourcesContent": ["/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport type PullPushTypes<T> = ArrayBufferLike | ArrayLike<T> | Iterable<T> | AsyncIterable<T> | T\n\nexport interface PullPushQueue<T, All> {\n  length(): number\n  more(): boolean\n  all(): All\n  push(data: T): void\n  pop(): T | undefined\n  empty(): void\n  splice(start: number, deleteCount?: number): All\n}\n\nexport class PullPushNonQueue<I, O> implements PullPushQueue<I, O> {\n  length() {\n    return 0\n  }\n\n  more() {\n    return true\n  }\n\n  all(): O {\n    throw new Error(\"Method not implemented.\")\n  }\n\n  push(_data: I) {\n  }\n\n  pop() {\n    return undefined\n  }\n\n  empty() {\n  }\n\n  splice(_start: number, _deleteCount?: number): O {\n    throw new Error(\"Method not implemented.\")\n  }\n}\n\nexport class PullPushArrayQueue<T = any> implements PullPushQueue<T, ArrayLike<T>> {\n  private queue: T[] = []\n\n  length() {\n    return this.queue.length\n  }\n\n  more() {\n    return this.queue.length > 0\n  }\n\n  all() {\n    return this.queue\n  }\n\n  push(data: T) {\n    this.queue.push(data)\n  }\n\n  pop() {\n    return this.queue.pop()\n  }\n\n  empty() {\n    this.queue.splice(0)\n  }\n\n  splice(start: number, deleteCount?: number) {\n    if (deleteCount) {\n      return this.queue.splice(start, deleteCount)\n    }\n    else {\n      return this.queue.splice(start)\n    }\n  }\n}\n\nexport class PullPushStringQueue implements PullPushQueue<string, string> {\n  private queue: string = \"\"\n\n  length() {\n    return this.queue.length\n  }\n\n  more() {\n    return this.queue.length > 0\n  }\n\n  all() {\n    return this.queue\n  }\n\n  push(data: string) {\n    this.queue += data\n  }\n\n  pop() {\n    return this.splice(-1)\n  }\n\n  empty() {\n    this.queue = \"\"\n  }\n\n  splice(start: number, deleteCount?: number) {\n    if (deleteCount) {\n      const value = this.queue.slice(start, start + deleteCount)\n      this.queue = this.queue.slice(0, start) + this.queue.slice(start + deleteCount)\n      return value\n    }\n    else {\n      const value = this.queue.slice(start)\n      this.queue = this.queue.slice(0, start)\n      return value\n    }\n  }\n}\n\nexport abstract class PullPush<I = any, O = any, Q extends PullPushQueue<I, any> = PullPushArrayQueue<I>> implements AsyncIterable<O> {\n  protected queue: Q\n\n  constructor(queue: Q) {\n    this.queue = queue\n  }\n\n  abstract pullpush(data?: PullPushTypes<I>, flush?: boolean): AsyncGenerator<O>\n\n  async push(data?: PullPushTypes<I>) {\n    if (data !== undefined) {\n      if (typeof data === \"function\") {\n        data = (await data())\n      }\n      if (data === null) {\n        this.queue.push(data)\n      }\n      else if (typeof data === \"string\") {\n        this.queue.push(data)\n      }\n      else if (Array.isArray(data)) {\n        for (const value of data) this.queue.push(value)\n      }\n      else if (typeof (data as Iterable<I>)[Symbol.iterator] === \"function\") {\n        for (const value of data as Iterable<I>) this.queue.push(value)\n      }\n      else if (typeof (data as AsyncIterable<I>)[Symbol.asyncIterator] === \"function\") {\n        for await (const value of data as AsyncIterable<I>) this.queue.push(value)\n      }\n      else {\n        this.queue.push(data as I)\n      }\n    }\n  }\n\n  pull(data?: PullPushTypes<I>) {\n    return this.pullpush(data)\n  }\n\n  flush(data?: PullPushTypes<I>) {\n    return this.pullpush(data, true)\n  }\n\n  [Symbol.asyncIterator]() {\n    return this.flush()\n  }\n\n  readable(data?: PullPushTypes<I>) {\n    const This = this\n    return new ReadableStream<O>({\n      async start(controller) {\n        for await (const chunk of This.flush(data)) {\n          controller.enqueue(chunk)\n        }\n        controller.close()\n      }\n    })\n  }\n\n  transform() {\n    const This = this\n    return new TransformStream<I, O>({\n      async transform(data, controller) {\n        for await (const chunk of This.pull(data)) {\n          controller.enqueue(chunk)\n        }\n      },\n      async flush(controller) {\n        for await (const chunk of This.flush()) {\n          controller.enqueue(chunk)\n        }\n      }\n    })\n  }\n\n  writable() {\n    const This = this\n    return new WritableStream<I>({\n      async write(data) {\n        await This.push(data)\n      }\n    })\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushArrayQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport class ArrayAccumulator<I = any> extends PullPush<I, ArrayLike<I>> {\n  private size: number\n\n  constructor(size: number) {\n    super(new PullPushArrayQueue)\n    this.size = size;\n  }\n\n  async *pullpush(data?: PullPushTypes<I>, flush?: boolean) {\n    await this.push(data)\n\n    do {\n      while (this.queue.length() >= this.size) {\n        await this.push(yield this.queue.splice(0, this.size))\n      }\n\n      if (flush) {\n        if (this.queue.more()) {\n          await this.push(yield this.queue.splice(0))\n        }\n      }\n      else {\n        break\n      }\n    } while (this.queue.more())\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushNonQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport interface ArrayBufferAccumulatorOptions {\n  forceEmit?: number[][] | ((bytes: IterableIterator<number>) => number)\n  fixed?: boolean\n}\n\nexport class ArrayBufferAccumulator extends PullPush<ArrayBufferLike | ArrayLike<number>, ArrayBufferLike, PullPushNonQueue<ArrayBufferLike | ArrayLike<number>, ArrayBufferLike>> {\n  private size: number\n  private forceEmit: ((bytes: IterableIterator<number>) => number) | undefined\n  private fixed: boolean\n  private buffer: ArrayBuffer | null\n  private bufferView: Uint8Array\n  private pos: number\n\n  constructor(size: number, options?: ArrayBufferAccumulatorOptions) {\n    super(new PullPushNonQueue())\n    this.size = size\n    this.fixed = options?.forceEmit ? false : options?.fixed ?? false\n    this.buffer = new ArrayBuffer(size)\n    this.bufferView = new Uint8Array(this.buffer)\n    this.pos = 0\n\n    if (options?.forceEmit) {\n      if (Array.isArray(options.forceEmit)) {\n        this.forceEmit = (bytes) => {\n          const clonedBytes: number[] = []\n          for (const byte of bytes) {\n            clonedBytes.push(byte)\n          }\n          const patterns = options.forceEmit as number[][]\n          for (let patternIndex = 0; patternIndex < patterns.length; ++patternIndex) {\n            const pattern = patterns[patternIndex]\n            let byteIndex = 0\n            let patternByteIndex = 0\n            for (const byte of clonedBytes.values()) {\n              if (byte !== pattern[patternByteIndex]) {\n                ++byteIndex\n                patternByteIndex = 0\n                continue\n              }\n              if (pattern.length === patternByteIndex + 1) {\n                return byteIndex + pattern.length\n              }\n              ++byteIndex\n              ++patternByteIndex\n            }\n          }\n          return -1\n        }\n      }\n      else {\n        this.forceEmit = options.forceEmit\n      }\n    }\n  }\n\n  async *pullpush(data?: PullPushTypes<ArrayBufferLike | ArrayLike<number>>, flush?: boolean) {\n    if (data) {\n      let chunkView: Uint8Array\n      let chunkSize: number\n      if (Array.isArray(data)) {\n        chunkView = new Uint8Array(data)\n        chunkSize = data.length\n      }\n      else {\n        const buffer = data as ArrayBufferLike\n        chunkView = new Uint8Array(buffer)\n        chunkSize = buffer.byteLength\n      }\n      let chunkPos = 0\n      let copySize\n\n      while (chunkSize > 0) {\n        if (this.pos === this.size) {\n          yield this.bufferView.slice()\n          this.pos = 0\n        }\n\n        copySize = Math.min(this.size - this.pos, chunkSize)\n        this.bufferView.set(chunkView.slice(chunkPos, chunkPos + copySize), this.pos)\n        this.pos += copySize\n        chunkPos += copySize\n        chunkSize -= copySize\n\n        if (this.forceEmit && this.pos > 0) {\n          let forceEmitPos = this.forceEmit(this.bufferView.slice(0, this.pos).values())\n          while (forceEmitPos > 0) {\n            yield this.bufferView.slice(0, forceEmitPos)\n            this.bufferView.copyWithin(0, forceEmitPos, this.size)\n            this.pos -= forceEmitPos\n            forceEmitPos = this.forceEmit(this.bufferView.slice(0, this.pos).values())\n          }\n        }\n      }\n    }\n\n    if (flush && this.pos > 0) {\n      if (this.forceEmit) {\n        let forceEmitPos = this.forceEmit(this.bufferView.slice(0, this.pos).values())\n        while (forceEmitPos > 0) {\n          yield this.bufferView.slice(0, forceEmitPos)\n          this.bufferView.copyWithin(0, forceEmitPos, this.size)\n          this.pos -= forceEmitPos\n          forceEmitPos = this.forceEmit(this.bufferView.slice(0, this.pos).values())\n        }\n      }\n      if (this.fixed) {\n        this.bufferView.fill(0, this.pos)\n        this.pos = this.size\n      }\n      if (this.pos > 0) {\n        yield this.bufferView.slice(0, this.pos)\n      }\n    }\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport class AssertStream<I = any> extends TransformStream<I, I> {\n  constructor(condition?: (chunk: I) => boolean | undefined) {\n    super({\n      transform(chunk, controller) {\n        if (condition) {\n          console.assert(condition(chunk), chunk)\n        }\n        else {\n          console.assert(undefined, chunk)\n        }\n        controller.enqueue(chunk)\n      }\n    })\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport class CombinedTransformStream<I = any, O = any> {\n  readonly readable: ReadableStream<O>\n  readonly writable: WritableStream<I>\n\n  constructor(transforms: TransformStream[], options?: StreamPipeOptions) {\n    const first = transforms.slice(0)[0]\n    const last = transforms.slice(-1)[0]\n    let previous: TransformStream | undefined = undefined\n    for (const transform of transforms) {\n      if (previous) previous.readable.pipeTo(transform.writable, options)\n      previous = transform\n    }\n    this.writable = first.writable\n    this.readable = last.readable\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushArrayQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport interface CsvLineEncoderOptions {\n  delimiter?: string\n  escape?: \"auto\" | \"all\" | \"none\" | ((s: string) => string)\n  withNewLine?: boolean\n  newLine?: string\n}\n\nexport class CsvLineEncoder<I = any> extends PullPush<I, string> {\n  private keys = new Map<string, Extract<keyof any, string>[]>()\n  private delimiter: string\n  private escape: string | ((s: string) => string)\n  private withNewLine: boolean\n  private newLine: string\n  private doEscape: (s: string) => string\n\n  constructor(options?: CsvLineEncoderOptions) {\n    super(new PullPushArrayQueue)\n    this.delimiter = options?.delimiter ?? \",\"\n    this.escape = options?.escape ?? \"auto\"\n    this.withNewLine = options?.withNewLine ?? true\n    this.newLine = this.withNewLine ? (options?.newLine ?? \"\\n\") : \"\"\n\n    this.doEscape =\n      typeof this.escape !== \"string\"\n        ? this.escape\n        : this.escape === \"auto\"\n          ? s => {\n            if (s.includes(\"\\\"\") || s.includes(\"\\n\")) {\n              return \"\\\"\" + s.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\"\n            }\n            return s\n          }\n          : this.escape === \"all\"\n            ? s => \"\\\"\" + s.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\"\n            : s => s;\n  }\n\n  async *pullpush(data?: PullPushTypes<I>) {\n    await this.push(data)\n\n    while (this.queue.more()) {\n      const value = this.queue.pop() as I\n      const key_ = Object.keys(value as object).join(\",\")\n\n      if (!this.keys.has(key_)) {\n        const keys_: Extract<keyof I, string>[] = []\n        for (const key in value) {\n          keys_.push(key)\n        }\n        this.keys.set(key_, keys_)\n      }\n\n      const line = this.keys.get(key_)!\n        .map(key => (value as any)[key] as object)\n        .map(o => o?.toString() ?? \"\")\n        .map(this.doEscape)\n        .join(this.delimiter)\n\n      await this.push(yield line + this.newLine)\n    }\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushArrayQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport class Flattener<I> extends PullPush<I, I> {\n  private limit?: number\n\n  constructor(limit?: number) {\n    super(new PullPushArrayQueue)\n    this.limit = limit\n  }\n\n  async *pullpush(data?: PullPushTypes<I>) {\n    await this.push(data)\n    while (this.queue.more()) {\n      this.push(yield* this.flatten(0, this.queue.splice(0)))\n    }\n  }\n\n  *flatten(level: number, data: any): Generator<I> {\n    if (Array.isArray(data) && (this.limit ?? level) >= level) {\n      for (const value of data) {\n        yield* this.flatten(level + 1, value)\n      }\n    }\n    else {\n      yield data\n    }\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushStringQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport interface JsonDeserializerOptions {\n  lineSeparated?: boolean\n  parse?: (text: string) => any\n}\n\nexport class JsonDeserializer<O = any> extends PullPush<string, O, PullPushStringQueue> {\n  private lineSeparated: boolean\n  private parse: (text: string) => any\n  private sanitize: (value: string) => string\n  private indexOfLastSeparator: (value: string) => number | undefined\n\n  constructor(options?: JsonDeserializerOptions) {\n    super(new PullPushStringQueue)\n    this.lineSeparated = options?.lineSeparated === true\n    this.parse = options?.parse ?? JSON.parse\n\n    const sanitizeForJson: (value: string) => string = value => {\n      let b = true\n      while (b) {\n        switch (value.slice(0, 1)) {\n          case \",\":\n          case \"[\":\n          case \" \":\n          case \"\\r\":\n          case \"\\n\":\n          case \"\\t\":\n            value = value.slice(1)\n            break\n          default:\n            b = false\n        }\n      }\n      b = true\n      while (b) {\n        switch (value.slice(-1)) {\n          case \",\":\n          case \"]\":\n          case \" \":\n          case \"\\r\":\n          case \"\\n\":\n          case \"\\t\":\n            value = value.slice(0, -1)\n            break\n          default:\n            b = false\n        }\n      }\n      return value\n    }\n\n    this.sanitize = this.lineSeparated\n      ? value => sanitizeForJson(value\n        .split(\"\\r\\n\").filter(Boolean).join(\"\\n\")\n        .split(\"\\n\").filter(Boolean).join(\",\")\n      )\n      : sanitizeForJson\n\n    this.indexOfLastSeparator = this.lineSeparated\n      ? value => {\n        for (let i = value.length - 1; i >= 0; i--) {\n          if (value[i] === \"\\n\") {\n            return i\n          }\n        }\n      }\n      : value => {\n        let nextStart = -1\n        let separator = -1\n        for (let i = value.length - 1; i >= 0; i--) {\n          switch (value[i]) {\n            case \"{\":\n              nextStart = i\n              break\n            case \",\":\n              separator = i\n              break\n            case \"}\":\n              if (nextStart > separator && separator > i) {\n                return separator\n              }\n              break\n          }\n        }\n      }\n  }\n\n  async *pullpush(data?: PullPushTypes<string>, flush?: boolean) {\n    await this.push(data)\n\n    do {\n      const lastSeparator = this.indexOfLastSeparator(this.queue.all())\n      if (lastSeparator) {\n        const json = \"[\" + this.sanitize(this.queue.splice(0, lastSeparator)) + \"]\"\n        await this.push(yield* this.parse(json))\n      }\n\n      if (flush) {\n        if (this.queue.more()) {\n          const json = \"[\" + this.sanitize(this.queue.all()) + \"]\"\n          await this.push(yield* this.parse(json))\n          this.queue.empty()\n        }\n      }\n      else {\n        break\n      }\n    } while (this.queue.more())\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { PullPush, PullPushArrayQueue, PullPushTypes } from \"../PullPush/PullPush.ts\"\n\nexport interface JsonSerializerOptions {\n  lineSeparated?: boolean\n  stringify?: (value: any) => string\n}\n\nexport class JsonSerializer<I = any> extends PullPush<I, string> {\n  private lineSeparated: boolean\n  private separator: string\n  private stringify: (value: any) => string\n  private isNotFirst: boolean\n\n  constructor(options?: JsonSerializerOptions) {\n    super(new PullPushArrayQueue)\n    this.lineSeparated = options?.lineSeparated === true\n    this.separator = this.lineSeparated ? \"\\n\" : \",\"\n    this.stringify = options?.stringify ?? JSON.stringify\n    this.isNotFirst = false;\n  }\n\n  async *pullpush(data?: PullPushTypes<I>, flush?: boolean) {\n    await this.push(data)\n\n    do {\n      for (const value of this.queue.splice(0)) {\n        if (this.isNotFirst) {\n          await this.push(yield this.separator + this.stringify(value))\n        }\n        else {\n          if (!this.lineSeparated) await this.push(yield \"[\")\n          await this.push(yield this.stringify(value))\n          this.isNotFirst = true\n        }\n      }\n\n      if (flush) {\n        if (!this.lineSeparated) await this.push(yield \"]\")\n        this.isNotFirst = false\n      }\n    } while (this.queue.more())\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport class PeekStream<I = any> extends TransformStream<I, I> {\n  constructor(fn: (chunk: I, index: number) => void) {\n    let index = 0\n    super({\n      transform(chunk, controller) {\n        fn(chunk, index++)\n        controller.enqueue(chunk)\n      }\n    })\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nimport { CombinedTransformStream } from \"../CombinedTransformStream/CombinedTransformStream.ts\"\n\nexport interface PerformanceStreamResult {\n  transforming: number\n  occupancy: number\n  minimum: number\n  maximum: number\n  average: number\n  median: number\n}\n\nexport class PerformanceStreamBuilder<I = any, O = any> {\n  private transforms: TransformStream[] = []\n  private measureName: string\n  private startMark: string\n  private endMark: string\n  private entries?: PerformanceEntryList\n\n  constructor(measureName: string, startMark: string, endMark: string) {\n    this.measureName = measureName\n    this.startMark = startMark\n    this.endMark = endMark\n  }\n\n  pipe(transform: TransformStream) {\n    this.transforms.push(transform)\n    return this\n  }\n\n  build(options?: StreamPipeOptions): TransformStream<I, O> {\n    const This = this\n\n    const first = new TransformStream<I, I>({\n      start() {\n        performance.clearMeasures(This.measureName)\n        performance.clearMarks(`${This.measureName}.${This.startMark}`)\n        performance.clearMarks(`${This.measureName}.${This.endMark}`)\n      },\n      transform(chunk, controller) {\n        performance.mark(`${This.measureName}.${This.startMark}`)\n        controller.enqueue(chunk)\n      }\n    })\n\n    const last = new TransformStream<O, O>({\n      transform(chunk, controller) {\n        performance.mark(`${This.measureName}.${This.endMark}`)\n        performance.measure(This.measureName, `${This.measureName}.${This.startMark}`, `${This.measureName}.${This.endMark}`)\n        performance.mark(`${This.measureName}.${This.startMark}`)\n        controller.enqueue(chunk)\n      },\n      flush() {\n        This.entries = performance.getEntriesByName(This.measureName)\n        performance.clearMeasures(This.measureName)\n        performance.clearMarks(`${This.measureName}.${This.startMark}`)\n        performance.clearMarks(`${This.measureName}.${This.endMark}`)\n      }\n    })\n\n    const combined = new CombinedTransformStream<I, O>(this.transforms, options)\n    this.transforms.splice(0)\n\n    first.readable.pipeTo(combined.writable, options)\n    combined.readable.pipeTo(last.writable, options)\n\n    return {\n      writable: first.writable,\n      readable: last.readable,\n    }\n  }\n\n  result(): PerformanceStreamResult | undefined {\n    if (!this.entries || this.entries.length === 0) return undefined\n\n    const durations = this.entries.map(e => e.duration)\n    if (durations.length === 0) {\n      return {\n        transforming: 0,\n        occupancy: 0,\n        minimum: 0,\n        maximum: 0,\n        average: 0,\n        median: 0,\n      }\n    }\n\n    const occupancy = durations.reduce((s, d) => s += d, 0.0)\n    const minimum = durations.reduce((l, r) => Math.min(l, r))\n    const maximum = durations.reduce((l, r) => Math.max(l, r))\n    const sorted = [...new Set(durations.sort((l, r) => l - r))]\n    const medianIndex = sorted.length / 2 | 0\n    const median = sorted.length === 0\n      ? 0\n      : sorted.length % 2\n        ? sorted[medianIndex]\n        : sorted[medianIndex - 1] + sorted[medianIndex]\n\n    return {\n      transforming: durations.length,\n      occupancy: occupancy,\n      minimum: minimum,\n      maximum: maximum,\n      average: occupancy / durations.length,\n      median: median,\n    }\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport class Utf8DecoderStream extends TransformStream<AllowSharedBufferSource | undefined, string> {\n  readonly encoding: string\n  readonly fatal: boolean\n  readonly ignoreBOM: boolean\n\n  constructor() {\n    const decoder = new TextDecoder\n    super({\n      transform(chunk, controller) {\n        controller.enqueue(decoder.decode(chunk, { stream: true }))\n      }\n    })\n    this.encoding = decoder.encoding\n    this.fatal = decoder.fatal\n    this.ignoreBOM = decoder.ignoreBOM\n  }\n}\n\nexport class Utf8EncoderStream extends TransformStream<string | undefined, Uint8Array> {\n  readonly encoding: string\n\n  constructor() {\n    const encoder = new TextEncoder\n    super({\n      transform(chunk, controller) {\n        controller.enqueue(encoder.encode(chunk))\n      }\n    })\n    this.encoding = encoder.encoding\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport type RuntimeNames = \"Unknown\" | \"Server\" | \"Browser\"\n\ntype Brand = {\n  brand: string\n  version: string\n}\n\nexport class Environment {\n\n  private static getUserAgentData() {\n    if (\"userAgentData\" in window.navigator) {\n      return (window.navigator as any).userAgentData\n    }\n    return undefined\n  }\n\n  private static async getHighEntropyValues(hints: string[]) {\n    const uad = this.getUserAgentData()\n    if (uad && \"getHighEntropyValues\" in uad) {\n      try {\n        return await uad.getHighEntropyValues(hints)\n      }\n      catch { }\n    }\n    return undefined\n  }\n\n  static hasBunApi(): boolean {\n    // @ts-ignore\n    return typeof Bun !== \"undefined\"\n  }\n\n  static hasDenoApi(): boolean {\n    // @ts-ignore\n    return typeof Deno !== \"undefined\"\n  }\n\n  static hasNodeApi(): boolean {\n    // @ts-ignore\n    return typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\"\n  }\n\n  static hasBrowserApi(): boolean {\n    return typeof window !== \"undefined\"\n  }\n\n  private static async getBrands() {\n    let brands: Brand[] | undefined\n\n    if (this.hasBunApi()) {\n      brands = [{\n        brand: \"Bun\",\n        // @ts-ignore\n        version: Bun.version,\n      }]\n    }\n    else if (this.hasDenoApi()) {\n      brands = [{\n        brand: \"Deno\",\n        // @ts-ignore\n        version: Deno.version.deno,\n      }]\n    }\n    else if (this.hasNodeApi()) {\n      brands = [{\n        brand: \"Node\",\n        // @ts-ignore\n        version: process.versions.node,\n      }]\n    }\n    else {\n      const hevs = await this.getHighEntropyValues([\"fullVersionList\"])\n      if (hevs?.fullVersionList) {\n        brands = (hevs.fullVersionList as Brand[])\n          .filter(x => !x.brand.includes(\"Not\"))\n        if (brands.length >= 2) {\n          brands = brands.filter(x => x.brand !== \"Chromium\")\n        }\n      }\n      else {\n        const uad = this.getUserAgentData()\n        if (uad && uad.brands) {\n          brands = (uad.brands as Brand[])\n            .filter(x => !x.brand.includes(\"Not\"))\n        }\n      }\n      if (brands?.length === 0) {\n        brands = undefined\n      }\n    }\n\n    return brands ?? this.getBrandsFromUA()\n  }\n\n  private static getBrandsFromUA() {\n    let pairs = (window.navigator.userAgent ?? \"\")\n      .split(\" \")\n      .filter(x => x.includes(\"/\"))\n      .filter(x => !x.includes(\"Mozilla\"))\n      .filter(x => !x.includes(\"Gecko\"))\n      .filter(x => !x.includes(\"WebKit\"))\n      .filter(x => !x.includes(\"Mobile\"))\n\n    const versionIndex = pairs.findIndex(x => x.includes(\"Version\"))\n    if (versionIndex >= 0) {\n      pairs = pairs\n        .filter(x => !x.includes(\"Safari\"))\n      pairs[versionIndex] = pairs[versionIndex].replace(\"Version\", \"Safari\")\n    }\n\n    const criOSIndex = pairs.findIndex(x => x.includes(\"CriOS\"))\n    if (criOSIndex >= 0) {\n      pairs[criOSIndex] = pairs[criOSIndex].replace(\"CriOS\", \"Chrome\")\n    }\n\n    const edgiOSIndex = pairs.findIndex(x => x.includes(\"EdgiOS\"))\n    if (edgiOSIndex >= 0) {\n      pairs[edgiOSIndex] = pairs[edgiOSIndex].replace(\"EdgiOS\", \"Edg\")\n    }\n\n    const fxiOSIndex = pairs.findIndex(x => x.includes(\"FxiOS\"))\n    if (fxiOSIndex >= 0) {\n      pairs[fxiOSIndex] = pairs[fxiOSIndex].replace(\"FxiOS\", \"FireFox\")\n    }\n\n    if (pairs.some(x => x.includes(\"Edg\") || x.includes(\"OPT\") || x.includes(\"OPR\") || x.includes(\"DuckDuckGo\"))) {\n      pairs = pairs\n        .filter(x => !x.includes(\"Chrome\"))\n        .filter(x => !x.includes(\"Safari\"))\n    }\n\n    if (pairs.some(x => x.includes(\"Chrome\"))) {\n      pairs = pairs\n        .filter(x => !x.includes(\"Safari\"))\n    }\n\n    return pairs.map(x => {\n      const brand: Brand = {\n        brand: x.split(\"/\")[0],\n        version: x.split(\"/\")[1],\n      }\n      return brand\n    })\n  }\n\n  static runtime(): RuntimeNames {\n    if (this.hasBunApi() || this.hasDenoApi() || this.hasNodeApi()) return \"Server\"\n    else if (this.hasBrowserApi()) return \"Browser\"\n    return \"Unknown\"\n  }\n\n  static async brand() {\n    const brands = await this.getBrands()\n    if (brands.length > 0) return brands[0].brand\n    return \"Unknown\"\n  }\n\n  static async version() {\n    const brands = await this.getBrands()\n    if (brands.length > 0) return brands[0].version\n    return \"Unknown\"\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// @ts-ignore\nconst sleep_impl: (msec?: number) => Promise<void> = (typeof Bun !== \"undefined\")\n  ? msec => {\n    // @ts-ignore\n    Bun.sleepSync(msec ?? 0)\n    return Promise.resolve()\n  }\n  : msec => new Promise(resolve => setTimeout(resolve, msec ?? 0));\n\nexport function sleep(msec?: number) {\n  return sleep_impl(msec)\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport async function* toAsyncIterableIterator<R>(readable: ReadableStream<R>) {\n  const reader = readable.getReader()\n  try {\n    while (true) {\n      const { done, value } = await reader.read()\n      if (done) break\n      yield value\n    }\n  }\n  finally {\n    reader.releaseLock()\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport interface DownloadStreamOptions {\n  mode?: \"blob\" | \"filesystem\"\n  linkHolder?: Node\n}\n\nexport class DownloadStream extends WritableStream {\n  constructor(name: string, options?: DownloadStreamOptions) {\n    const download = (blob: Blob) => {\n      const url = URL.createObjectURL(blob)\n      const trigger = document.createElement(\"a\")\n      trigger.href = url\n      trigger.target = \"_blank\"\n      trigger.download = name\n      trigger.innerText = name\n      if (options?.linkHolder) {\n        options.linkHolder.appendChild(trigger)\n      }\n      else {\n        trigger.click()\n        trigger.remove()\n        setTimeout(() => URL.revokeObjectURL(url), 10 * 1000)\n      }\n    }\n\n    if (options?.mode === \"filesystem\") {\n      let directory: FileSystemDirectoryHandle\n      let handle: FileSystemFileHandle\n      let fileStream: FileSystemWritableFileStream\n      super({\n        async start() {\n          directory = await navigator.storage.getDirectory()\n          handle = await directory.getFileHandle(name, { create: true })\n          fileStream = await handle.createWritable()\n        },\n        async write(chunk) {\n          await fileStream.write(chunk)\n        },\n        async close() {\n          await fileStream.close();\n          const file = await handle.getFile()\n          download(file)\n        },\n        async abort(reason) {\n          fileStream.abort(reason)\n          await directory.removeEntry(name)\n        }\n      })\n    }\n\n    else {\n      let chunks: any[]\n      super({\n        start() {\n          chunks = []\n        },\n        write(chunk) {\n          chunks.push(chunk)\n        },\n        close() {\n          const blob = new Blob(chunks)\n          download(blob)\n        },\n        abort() {\n          chunks = []\n        }\n      })\n    }\n  }\n}", "/*!\nMIT No Attribution\n\nCopyright 2024 an(https://github.com/an-dist)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\nINCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\nPARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nexport class DomConsole implements Console {\n  private owner: HTMLElement\n  private redirect?: Console\n  private parent?: DomConsole\n  private child?: DomConsole\n  private holder: HTMLUListElement\n\n  constructor(owner: HTMLElement | string, redirect?: Console, parent?: DomConsole) {\n    if (typeof owner === \"string\") {\n      this.owner = document.getElementById(owner)!\n      this.owner.append(this.createContextMenu(this.owner))\n      const scopedStyle = document.createElement(\"style\")\n      scopedStyle.setAttribute(\"scoped\", \"\")\n      scopedStyle.textContent = `\n        .console-list {\n          >.console-list-item>label {\n            display: block;\n          }\n          >.console-list-item:has(>label>input[name=\"group-visibility\"]:not(:checked))>.console-list {\n            display: none;\n          }\n          >.console-list-item:has(>label>input[name=\"group-visibility\"]:checked)>.console-list {\n            display: block;\n          }\n        }`\n      this.owner.append(scopedStyle)\n    }\n    else {\n      this.owner = owner\n    }\n    this.redirect = redirect\n    this.parent = parent\n    this.holder = document.createElement(\"ul\")\n    this.holder.classList.add(\"console-list\")\n    this.owner.appendChild(this.holder)\n  }\n\n  private dataToString(...data: any[]) {\n    const lst: string[] = []\n    for (let i = 0; i < arguments.length; ++i) {\n      switch (typeof data[i]) {\n        case \"string\":\n          lst.push(data[i])\n          break\n        case \"number\":\n        case \"bigint\":\n        case \"boolean\":\n          lst.push(data[i].toString())\n          break\n        case \"undefined\":\n          lst.push(\"undefined\")\n          break\n        default:\n          if (Array.isArray(data[i])) {\n            const arr = data[i] as Array<any>\n            lst.push(`(${arr.length}) [${arr.map(v => this.dataToString(v)).join(\", \")}]`)\n          }\n          else {\n            lst.push(JSON.stringify(data[i]))\n          }\n          break\n      }\n    }\n    return lst.join(\" \")\n  }\n\n  private appendItem(classSuffix?: string, ...data: any[]) {\n    const li = document.createElement(\"li\")\n    li.classList.add(\"console-list-item\")\n    if (classSuffix) {\n      li.classList.add(`console-list-item-${classSuffix}`)\n    }\n    const lbl = document.createElement(\"label\")\n    lbl.textContent = this.dataToString(...data)\n    li.append(lbl)\n    this.holder.append(li)\n    return li\n  }\n\n  private toNextHolder(collapsed: boolean, ...data: any[]) {\n    const current = this.appendItem(\"group\", ...data)\n    const chk = document.createElement(\"input\")\n    chk.name = \"group-visibility\"\n    chk.type = \"checkbox\"\n    chk.checked = !collapsed\n    current.firstElementChild!.prepend(chk)\n    this.child = new DomConsole(current, this.redirect, this)\n  }\n\n  private createContextMenu(owner: HTMLElement) {\n    const menu = document.createElement(\"ul\")\n    menu.classList.add(\"console-menu\")\n    menu.style.display = \"none\"\n    menu.style.position = \"fixed\"\n\n    let target: EventTarget | null\n    owner.addEventListener(\"contextmenu\", ev => {\n      if (!(ev.target as HTMLElement)?.parentElement?.classList.contains(\"console-list-item-group\")) return\n      ev.preventDefault()\n      const menu = owner.querySelector(\".console-menu\") as HTMLUListElement | null\n      if (!menu) return\n      menu.style.left = ev.pageX + \"px\"\n      menu.style.top = ev.pageY - scrollY + \"px\"\n      menu.style.display = \"block\"\n      target = ev.target\n    })\n    window.addEventListener(\"click\", () => {\n      const menu = owner.querySelector(\".console-menu\") as HTMLUListElement | null\n      if (!menu) return\n      menu.style.display = \"none\"\n    })\n\n    const addItem = (text: string, action: (target: EventTarget | null) => void) => {\n      const item = document.createElement(\"li\")\n      item.textContent = text\n      item.onclick = () => {\n        action(target)\n        menu.style.display = \"none\"\n      }\n      menu.append(item)\n    }\n\n    addItem(\"Expand all\", target => this.expand(true, (target as Element)?.parentElement))\n    addItem(\"Collapse all\", target => this.expand(false, (target as Element)?.parentElement))\n\n    return menu\n  }\n\n  private withTrace(parent: Element, error: Error) {\n    const callStack = (error.stack ?? \"\")\n      .replace(\"Error\\n\", \"\")\n      .split(\"\\n\")\n      .map(s => s.trim().split(/[ |@|(|)]/).filter(s2 => ![\"at\", \"\"].includes(s2)).join(\" @ \"))\n      .map(s => s.replace(location.href.replace(location.pathname, \"\"), \"\"))\n      .filter(s => s.length > 0)\n      .filter(s => !s.includes(\"trace @ \"))\n      .filter(s => !s.includes(\"/DomConsole/DomConsole\"))\n      .map(s => s.includes(\" @ \") ? s : \"(anonymous) @ \" + s)\n\n    if (callStack.length > 0) {\n      const callStackItem = document.createElement(\"ul\")\n      for (const stack of callStack) {\n        const stackItem = document.createElement(\"li\")\n        stackItem.textContent = stack\n        callStackItem.append(stackItem)\n      }\n      parent.append(callStackItem)\n    }\n  }\n\n  private createHeaderCell(textContent: string) {\n    const headerCell = document.createElement(\"th\")\n    headerCell.textContent = textContent\n    return headerCell\n  }\n\n  private getThis() {\n    let This: DomConsole | undefined = this\n    while (This.child) {\n      This = This.child\n    }\n    return This\n  }\n\n  expand(expand: boolean, owner?: Element | null, depth?: number) {\n    const chks = [...(owner ?? this.owner).querySelectorAll(\"input[name='group-visibility']\")] as HTMLInputElement[]\n\n    const ancestors = (target: Element) => {\n      const ancestors: HTMLInputElement[] = []\n      let current: HTMLElement | null = target.parentElement\n      while (current) {\n        if (current.tagName === \"LI\") {\n          const found = current.firstElementChild?.firstElementChild\n          if (found && found !== target) {\n            if (found.getAttribute(\"type\") === \"checkbox\") {\n              ancestors.push(found as HTMLInputElement)\n            }\n          }\n        }\n        current = current.parentElement\n      }\n      return ancestors\n    }\n\n    const ownerDepth = owner === undefined ? 0 : ancestors(owner!).length\n    chks.forEach(chk => {\n      const level = depth === undefined ? 0 : ancestors(chk).length - ownerDepth + depth\n      chk.checked = level >= 0 ? expand : !expand\n    })\n  }\n\n  group(...data: any[]) {\n    const This = this.getThis()\n    This.toNextHolder(false, ...data)\n    This.redirect?.group(...data)\n  }\n\n  groupCollapsed(...data: any[]) {\n    const This = this.getThis()\n    This.toNextHolder(true, ...data)\n    This.redirect?.groupCollapsed(...data)\n  }\n\n  groupEnd() {\n    const This = this.getThis()\n    if (This.parent) This.parent.child = undefined\n    This.redirect?.groupEnd()\n  }\n\n  clear() {\n    const oldHolder = this.holder\n    const newHolder = oldHolder.cloneNode(false)\n    this.owner.replaceChild(newHolder, oldHolder)\n    this.holder = newHolder as HTMLUListElement\n    this.child = undefined\n    this.redirect?.clear()\n  }\n\n  assert(condition?: boolean, ...data: any[]) {\n    const This = this.getThis()\n    if (condition !== undefined && !condition) {\n      const item = This.appendItem(\"assert\", \"Assertion failed:\", ...data)\n      This.withTrace(item.firstElementChild!, new Error())\n      This.redirect?.assert(false, ...data)\n    }\n  }\n\n  log(...data: any[]) {\n    const This = this.getThis()\n    This.appendItem(\"log\", ...data)\n    This.redirect?.log(...data)\n  }\n\n  trace(...data: any[]) {\n    const This = this.getThis()\n    const item = This.appendItem(\"trace\", ...data)\n    This.withTrace(item.firstElementChild!, new Error())\n    This.redirect?.trace(...data)\n  }\n\n  debug(...data: any[]) {\n    const This = this.getThis()\n    This.appendItem(\"debug\", ...data)\n    This.redirect?.debug(...data)\n  }\n\n  info(...data: any[]) {\n    const This = this.getThis()\n    This.appendItem(\"info\", ...data)\n    This.redirect?.info(...data)\n  }\n\n  warn(...data: any[]) {\n    const This = this.getThis()\n    const item = This.appendItem(\"warn\", ...data)\n    This.withTrace(item.firstElementChild!, new Error())\n    This.redirect?.warn(...data)\n  }\n\n  error(...data: any[]) {\n    const This = this.getThis()\n    const item = This.appendItem(\"error\", ...data)\n    This.withTrace(item.firstElementChild!, new Error())\n    This.redirect?.error(...data)\n  }\n\n  table(tabularData?: any, properties?: string[]) {\n    const This = this.getThis()\n    const table = document.createElement(\"table\")\n    table.classList.add(\"console-list-item-table\")\n    const header = table.createTHead()\n    const headerRow = header.insertRow(-1)\n    headerRow.append(This.createHeaderCell(\"(index)\"))\n    if (Array.isArray(tabularData)) {\n      for (const key in tabularData[0]) {\n        if (properties) {\n          if (properties.indexOf(key) === -1) {\n            continue\n          }\n        }\n        headerRow.append(This.createHeaderCell(key))\n      }\n    }\n    else {\n      headerRow.append(This.createHeaderCell(\"Value\"))\n    }\n    const body = table.createTBody()\n    if (tabularData) {\n      if (Array.isArray(tabularData)) {\n        let dataIndex = 0\n        for (const data of tabularData) {\n          const bodyRow = body.insertRow(-1)\n          bodyRow.insertCell(-1).textContent = dataIndex.toString()\n          for (const key in data) {\n            if (properties) {\n              if (properties.indexOf(key) === -1) {\n                continue\n              }\n            }\n            bodyRow.insertCell(-1).textContent = data[key]\n          }\n          ++dataIndex\n        }\n      }\n      else {\n        for (const key in tabularData) {\n          const bodyRow = body.insertRow(-1)\n          bodyRow.insertCell(-1).textContent = key\n          bodyRow.insertCell(-1).textContent = tabularData[key]\n        }\n      }\n    }\n    const li = This.appendItem()\n    li.firstElementChild!.append(table)\n    This.holder.append(li)\n    This.redirect?.table(tabularData, properties)\n  }\n\n  /*! Redirect only. **/\n\n  count(label?: string) {\n    const This = this.getThis()\n    This.redirect?.count(label)\n  }\n\n  countReset(label?: string) {\n    const This = this.getThis()\n    This.redirect?.countReset(label)\n  }\n\n  dir(item?: any, options?: any) {\n    const This = this.getThis()\n    This.redirect?.dir(item, options)\n  }\n\n  dirxml(...data: any[]) {\n    const This = this.getThis()\n    This.redirect?.dirxml(...data)\n  }\n\n  time(label?: string) {\n    const This = this.getThis()\n    This.redirect?.time(label)\n  }\n\n  timeEnd(label?: string) {\n    const This = this.getThis()\n    This.redirect?.timeEnd(label)\n  }\n\n  timeLog(label?: string, ...data: any[]) {\n    const This = this.getThis()\n    This.redirect?.timeLog(label, ...data)\n  }\n\n  timeStamp(label?: string) {\n    const This = this.getThis()\n    This.redirect?.timeStamp(label)\n  }\n}"],
  "mappings": "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",
  "names": ["PullPushNonQueue", "_data", "_start", "_deleteCount", "PullPushArrayQueue", "data", "start", "deleteCount", "PullPushStringQueue", "value", "PullPush", "queue", "This", "controller", "chunk", "ArrayAccumulator", "PullPush", "size", "PullPushArrayQueue", "data", "flush", "ArrayBufferAccumulator", "PullPush", "size", "options", "PullPushNonQueue", "bytes", "clonedBytes", "byte", "patterns", "patternIndex", "pattern", "byteIndex", "patternByteIndex", "data", "flush", "chunkView", "chunkSize", "buffer", "chunkPos", "copySize", "forceEmitPos", "AssertStream", "condition", "chunk", "controller", "CombinedTransformStream", "transforms", "options", "first", "last", "previous", "transform", "CsvLineEncoder", "PullPush", "options", "PullPushArrayQueue", "data", "value", "key_", "keys_", "key", "line", "o", "Flattener", "PullPush", "limit", "PullPushArrayQueue", "data", "level", "value", "JsonDeserializer", "PullPush", "options", "PullPushStringQueue", "sanitizeForJson", "value", "b", "i", "nextStart", "separator", "data", "flush", "lastSeparator", "json", "JsonSerializer", "PullPush", "options", "PullPushArrayQueue", "data", "flush", "value", "PeekStream", "fn", "index", "chunk", "controller", "PerformanceStreamBuilder", "measureName", "startMark", "endMark", "transform", "options", "This", "first", "chunk", "controller", "last", "combined", "CombinedTransformStream", "durations", "e", "occupancy", "s", "d", "minimum", "l", "r", "maximum", "sorted", "medianIndex", "median", "Utf8DecoderStream", "decoder", "chunk", "controller", "Utf8EncoderStream", "encoder", "Environment", "hints", "uad", "brands", "hevs", "x", "pairs", "versionIndex", "criOSIndex", "edgiOSIndex", "fxiOSIndex", "sleep_impl", "msec", "resolve", "sleep", "toAsyncIterableIterator", "readable", "reader", "done", "value", "DownloadStream", "name", "options", "download", "blob", "url", "trigger", "directory", "handle", "fileStream", "chunk", "file", "reason", "chunks", "DomConsole", "_DomConsole", "owner", "redirect", "parent", "scopedStyle", "data", "lst", "i", "arr", "v", "classSuffix", "li", "lbl", "collapsed", "current", "chk", "menu", "target", "ev", "addItem", "text", "action", "item", "error", "callStack", "s", "s2", "callStackItem", "stack", "stackItem", "textContent", "headerCell", "This", "expand", "depth", "chks", "ancestors", "found", "ownerDepth", "level", "oldHolder", "newHolder", "condition", "tabularData", "properties", "table", "headerRow", "key", "body", "dataIndex", "bodyRow", "label", "options"]
}
