{
  "version": 3,
  "sources": ["test.ts"],
  "sourcesContent": ["import { PerformanceStreamBuilder } from \"../PerformanceStream.ts\"\nimport { CompatiblePerformance } from \"../../misc/CompatiblePerformance/CompatiblePerformance.ts\"\nimport { sleep } from \"../../funcs/sleep/sleep.ts\"\n\n(async () => {\n\n  CompatiblePerformance.replaceIfUnsupported()\n\n  const source = () => new ReadableStream({\n    start(controller) {\n      for (const n of [1, 2, 3, 4, 5]) {\n        controller.enqueue(n)\n      }\n      controller.close()\n    }\n  })\n\n  const terminate = () => new WritableStream({\n    write(chunk) {\n      console.log(`writed: ${chunk}`)\n      console.groupEnd()\n    }\n  })\n\n  const grouping = () => new TransformStream({\n    transform(chunk, controller) {\n      console.group(`chunk=${chunk}`)\n      controller.enqueue(chunk)\n    }\n  })\n\n  const transform = (name: string) => new TransformStream({\n    async transform(chunk, controller) {\n      console.log(`chunk=${chunk}, name=${name}`)\n      await sleep(100)\n      controller.enqueue(chunk)\n    }\n  })\n\n  const builder = new PerformanceStreamBuilder(\"perf\", \"start\", \"end\")\n\n  await source()\n    .pipeThrough(grouping())\n    .pipeThrough(builder\n      .pipe(transform(\"transform 1\"))\n      .pipe(transform(\"transform 2\"))\n      .pipe(transform(\"transform 3\"))\n      .build())\n    .pipeTo(terminate())\n\n  console.table(builder.result())\n\n})()"],
  "mappings": "aAAA,OAAS,4BAAAA,MAAgC,0BACzC,OAAS,yBAAAC,MAA6B,4DACtC,OAAS,SAAAC,MAAa,8BAErB,SAAY,CAEXD,EAAsB,qBAAqB,EAE3C,MAAME,EAAS,IAAM,IAAI,eAAe,CACtC,MAAMC,EAAY,CAChB,UAAWC,IAAK,CAAC,EAAG,EAAG,EAAG,EAAG,CAAC,EAC5BD,EAAW,QAAQC,CAAC,EAEtBD,EAAW,MAAM,CACnB,CACF,CAAC,EAEKE,EAAY,IAAM,IAAI,eAAe,CACzC,MAAMC,EAAO,CACX,QAAQ,IAAI,WAAWA,CAAK,EAAE,EAC9B,QAAQ,SAAS,CACnB,CACF,CAAC,EAEKC,EAAW,IAAM,IAAI,gBAAgB,CACzC,UAAUD,EAAOH,EAAY,CAC3B,QAAQ,MAAM,SAASG,CAAK,EAAE,EAC9BH,EAAW,QAAQG,CAAK,CAC1B,CACF,CAAC,EAEKE,EAAaC,GAAiB,IAAI,gBAAgB,CACtD,MAAM,UAAUH,EAAOH,EAAY,CACjC,QAAQ,IAAI,SAASG,CAAK,UAAUG,CAAI,EAAE,EAC1C,MAAMR,EAAM,GAAG,EACfE,EAAW,QAAQG,CAAK,CAC1B,CACF,CAAC,EAEKI,EAAU,IAAIX,EAAyB,OAAQ,QAAS,KAAK,EAEnE,MAAMG,EAAO,EACV,YAAYK,EAAS,CAAC,EACtB,YAAYG,EACV,KAAKF,EAAU,aAAa,CAAC,EAC7B,KAAKA,EAAU,aAAa,CAAC,EAC7B,KAAKA,EAAU,aAAa,CAAC,EAC7B,MAAM,CAAC,EACT,OAAOH,EAAU,CAAC,EAErB,QAAQ,MAAMK,EAAQ,OAAO,CAAC,CAEhC,GAAG",
  "names": ["PerformanceStreamBuilder", "CompatiblePerformance", "sleep", "source", "controller", "n", "terminate", "chunk", "grouping", "transform", "name", "builder"]
}
