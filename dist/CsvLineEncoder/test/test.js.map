{
  "version": 3,
  "sources": ["test.ts"],
  "sourcesContent": ["import { CsvLineEncoder } from \"../CsvLineEncoder.ts\"\n\nconst source = (data: any[]) => new ReadableStream({\n  start(controller) {\n    controller.enqueue(data)\n    controller.close()\n  }\n})\n\nconst logging = () => new TransformStream({\n  transform(chunk, controller) {\n    console.log(chunk)\n    controller.enqueue(chunk)\n  }\n})\n\nconst terminate = () => new WritableStream()\n\nconst data = [\n  { \"a\": 1, \"b\": 2, \"c\": \"aaa\\nbbb,ccc\" },\n  { \"a\": 4, \"b\": 5, \"c\": 6 },\n  { \"a\": 7, \"b\": 8, \"c\": 9 },\n  { \"c1\": \"a\", \"c2\": \"b\", \"c3\": \"c\", \"c4\": \"d\" },\n]\n\nconsole.groupCollapsed(\"=== escape: all ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ escape: \"all\" }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"=== escape: auto ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ escape: \"auto\" }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"=== escape: none ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ escape: \"none\" }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"=== escape: custom ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ escape: s => `[${s}]` }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"=== delimiter: custom ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ delimiter: \"|\" }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"=== newLine: custom ===\")\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ newLine: \"|\" }).transform())\n  .pipeThrough(logging())\n  .pipeTo(terminate())\nconsole.groupEnd()\n\nconsole.groupCollapsed(\"\\n=== no new line ===\")\nlet text = \"\"\nawait source(data)\n  .pipeThrough(new CsvLineEncoder({ withNewLine: false }).transform())\n  .pipeTo(new WritableStream({\n    write(chunk) {\n      text += chunk\n    }\n  }))\nconsole.log(text)\nconsole.groupEnd()\n\nconsole.log(\"\\nTest completed.\")"],
  "mappings": ";AAAA,SAAS,sBAAsB;AAE/B,MAAM,SAAS,CAACA,UAAgB,IAAI,eAAe;AAAA,EACjD,MAAM,YAAY;AAChB,eAAW,QAAQA,KAAI;AACvB,eAAW,MAAM;AAAA,EACnB;AACF,CAAC;AAED,MAAM,UAAU,MAAM,IAAI,gBAAgB;AAAA,EACxC,UAAU,OAAO,YAAY;AAC3B,YAAQ,IAAI,KAAK;AACjB,eAAW,QAAQ,KAAK;AAAA,EAC1B;AACF,CAAC;AAED,MAAM,YAAY,MAAM,IAAI,eAAe;AAE3C,MAAM,OAAO;AAAA,EACX,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,eAAe;AAAA,EACtC,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,EAAE;AAAA,EACzB,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,EAAE;AAAA,EACzB,EAAE,MAAM,KAAK,MAAM,KAAK,MAAM,KAAK,MAAM,IAAI;AAC/C;AAEA,QAAQ,eAAe,qBAAqB;AAC5C,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,QAAQ,MAAM,CAAC,EAAE,UAAU,CAAC,EAC7D,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,sBAAsB;AAC7C,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,QAAQ,OAAO,CAAC,EAAE,UAAU,CAAC,EAC9D,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,sBAAsB;AAC7C,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,QAAQ,OAAO,CAAC,EAAE,UAAU,CAAC,EAC9D,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,wBAAwB;AAC/C,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,QAAQ,OAAK,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,EACrE,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,2BAA2B;AAClD,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,WAAW,IAAI,CAAC,EAAE,UAAU,CAAC,EAC9D,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,yBAAyB;AAChD,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,SAAS,IAAI,CAAC,EAAE,UAAU,CAAC,EAC5D,YAAY,QAAQ,CAAC,EACrB,OAAO,UAAU,CAAC;AACrB,QAAQ,SAAS;AAEjB,QAAQ,eAAe,uBAAuB;AAC9C,IAAI,OAAO;AACX,MAAM,OAAO,IAAI,EACd,YAAY,IAAI,eAAe,EAAE,aAAa,MAAM,CAAC,EAAE,UAAU,CAAC,EAClE,OAAO,IAAI,eAAe;AAAA,EACzB,MAAM,OAAO;AACX,YAAQ;AAAA,EACV;AACF,CAAC,CAAC;AACJ,QAAQ,IAAI,IAAI;AAChB,QAAQ,SAAS;AAEjB,QAAQ,IAAI,mBAAmB;",
  "names": ["data"]
}
