import*as l from"/web.min.js";globalThis.console=new l.DomConsole("console",globalThis.console);const g=document.getElementById("rdoInputFormatCSV"),c=document.getElementById("rdoInputFormatTSV"),b=document.getElementById("rdoHeaderDetectionFromFile"),C=document.getElementById("txtReadingLimit"),u=document.getElementById("lblRecords"),t=document.getElementById("txtFile"),r=document.getElementById("tblResult"),h=()=>{g.checked?t.accept=".csv":c.checked&&(t.accept=".tsv")};g.addEventListener("change",h),c.addEventListener("change",h);let e;t.onchange=async()=>{if((!e||!e.signal.aborted)&&e?.abort(),e=new AbortController,u.textContent="0",r.innerHTML="",r.createTBody(),!t.files||t.files.length===0)return;const f=t.files[0].stream().pipeThrough(new l.Utf8DecoderStream,{signal:e.signal}).pipeThrough(new l.CsvDeserializer({hasHeader:b.checked,delimitor:c.checked?"	":","}).transformable(),{signal:e.signal});let n=1;const a=Number(C.value);for await(const s of f){if(!r.tHead){const m=r.createTHead().insertRow();let o=document.createElement("th");o.textContent="#",m.append(o);for(const p in s)o=document.createElement("th"),o.textContent=p,m.append(o)}const i=r.tBodies[0].insertRow();i.insertCell().textContent=n.toLocaleString();for(const d of Object.values(s))i.insertCell().textContent=d?.toString()??"";if(u.textContent=n.toLocaleString(),n%(a/10)===0&&await l.sleep(0),n>=a){e.abort();break}++n}};
//# sourceMappingURL=CsvViewer.min.js.map
