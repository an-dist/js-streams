import*as r from"/web.min.js";globalThis.console=new r.DomConsole("console",globalThis.console);const g=document.getElementById("rdoInputFormatCSV"),a=document.getElementById("rdoInputFormatTSV"),b=document.getElementById("rdoHeaderDetectionFromFile"),C=document.getElementById("txtReadingLimit"),u=document.getElementById("lblRecords"),t=document.getElementById("txtFile"),l=document.getElementById("tblResult"),h=()=>{g.checked?t.accept=".csv":a.checked&&(t.accept=".tsv")};g.addEventListener("change",h),a.addEventListener("change",h);let e;t.onchange=async()=>{if((!e||!e.signal.aborted)&&e?.abort(),e=new AbortController,u.textContent="0",l.innerHTML="",l.createTBody(),!t.files||t.files.length===0)return;const f=t.files[0].stream().pipeThrough(new r.Utf8DecoderStream,{signal:e.signal}).pipeThrough(new r.CsvDeserializer({hasHeader:b.checked,delimitor:a.checked?"	":","}).transformable(),{signal:e.signal});let n=1;const c=Number(C.value);for await(const s of r.toAsyncIterableIterator(f,{signal:e.signal})){if(!l.tHead){const m=l.createTHead().insertRow();let o=document.createElement("th");o.textContent="#",m.append(o);for(const p in s)o=document.createElement("th"),o.textContent=p,m.append(o)}const i=l.tBodies[0].insertRow();i.insertCell().textContent=n.toLocaleString();for(const d of Object.values(s))i.insertCell().textContent=d?.toString()??"";if(u.textContent=n.toLocaleString(),n%(c/10)===0&&await r.sleep(0),n>=c){e.abort();break}++n}};
//# sourceMappingURL=CsvViewer.min.js.map
