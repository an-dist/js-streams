{
  "version": 3,
  "sources": ["JsonToCsv.download.ts"],
  "sourcesContent": ["import * as streams from \"../../web.ts\"\r\n\r\nconst chkDirect = document.getElementById(\"chkDirect\") as HTMLInputElement\r\nconst txtUrl = document.getElementById(\"txtUrl\") as HTMLInputElement\r\nconst btnConvertUrl = document.getElementById(\"btnConvertUrl\") as HTMLButtonElement\r\nconst linkHolder = btnConvertUrl.parentElement!.lastElementChild as HTMLDivElement\r\n\r\nbtnConvertUrl.onclick = async () => {\r\n  fetch(txtUrl.value, { credentials: \"include\" }).then(async response => {\r\n    if (!response.ok) {\r\n      console.warn(`${txtUrl.value} responded status code ${response.status}.`, await response.text())\r\n      return\r\n    }\r\n\r\n    let options: streams.DownloadStreamOptions | undefined\r\n    if (!chkDirect.checked) {\r\n      options = {\r\n        linkHolder\r\n      }\r\n    }\r\n\r\n    response.body!\r\n      .pipeThrough(new streams.Utf8DecoderStream())\r\n      .pipeThrough(new streams.JsonDeserializer({ lineSeparated: response.headers.get(\"content-type\")?.includes(\"jsonl\") }).transform())\r\n      .pipeThrough(new streams.CsvLineEncoder({ withNewLine: true }).transform())\r\n      .pipeTo(new streams.DownloadStream(\"download.csv\", options))\r\n  })\r\n}"],
  "mappings": "AAAA,UAAYA,MAAa,eAEzB,MAAMC,EAAY,SAAS,eAAe,WAAW,EAC/CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAgB,SAAS,eAAe,eAAe,EACvDC,EAAaD,EAAc,cAAe,iBAEhDA,EAAc,QAAU,SAAY,CAClC,MAAMD,EAAO,MAAO,CAAE,YAAa,SAAU,CAAC,EAAE,KAAK,MAAMG,GAAY,CACrE,GAAI,CAACA,EAAS,GAAI,CAChB,QAAQ,KAAK,GAAGH,EAAO,KAAK,0BAA0BG,EAAS,MAAM,IAAK,MAAMA,EAAS,KAAK,CAAC,EAC/F,MACF,CAEA,IAAIC,EACCL,EAAU,UACbK,EAAU,CACR,WAAAF,CACF,GAGFC,EAAS,KACN,YAAY,IAAIL,EAAQ,iBAAmB,EAC3C,YAAY,IAAIA,EAAQ,iBAAiB,CAAE,cAAeK,EAAS,QAAQ,IAAI,cAAc,GAAG,SAAS,OAAO,CAAE,CAAC,EAAE,UAAU,CAAC,EAChI,YAAY,IAAIL,EAAQ,eAAe,CAAE,YAAa,EAAK,CAAC,EAAE,UAAU,CAAC,EACzE,OAAO,IAAIA,EAAQ,eAAe,eAAgBM,CAAO,CAAC,CAC/D,CAAC,CACH",
  "names": ["streams", "chkDirect", "txtUrl", "btnConvertUrl", "linkHolder", "response", "options"]
}
