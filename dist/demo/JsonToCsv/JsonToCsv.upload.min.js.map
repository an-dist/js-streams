{
  "version": 3,
  "sources": ["JsonToCsv.upload.ts"],
  "sourcesContent": ["// @ts-ignore\nimport * as streams from \"/web.ts\"\n\nconst chkDirect = document.getElementById(\"chkDirect\") as HTMLInputElement\nconst rdoInputFormatJSONL = document.getElementById(\"rdoInputFormatJSONL\") as HTMLInputElement\nconst rdoInputFormatJSONC = document.getElementById(\"rdoInputFormatJSONC\") as HTMLInputElement\nconst rdoOutputFormatCSV = document.getElementById(\"rdoOutputFormatCSV\") as HTMLInputElement\nconst txtFile = document.getElementById(\"txtFile\") as HTMLInputElement\nconst linkHolder = txtFile.parentElement!.lastElementChild as HTMLDivElement\n\ntxtFile.onchange = () => {\n  if (!txtFile.files) {\n    return\n  }\n\n  let downloadStreamOptions: streams.DownloadStreamOptions | undefined\n  if (!chkDirect.checked) {\n    downloadStreamOptions = {\n      linkHolder,\n    }\n  }\n\n  const jsonDeserializeOptions = {\n    lineSeparated: rdoInputFormatJSONL.checked,\n    withComments: rdoInputFormatJSONC.checked,\n  }\n\n  const csvLineEncoderOptions = {\n    delimiter: rdoOutputFormatCSV.checked\n      ? \",\"\n      : \"\\t\",\n    withNewLine: true,\n  }\n\n  const downloadName = rdoOutputFormatCSV.checked\n    ? \"download.csv\"\n    : \"download.tsv\"\n\n  txtFile.files![0].stream()\n    .pipeThrough(new streams.Utf8DecoderStream())\n    .pipeThrough(new streams.JsonDeserializer(jsonDeserializeOptions).transform())\n    .pipeThrough(new streams.CsvLineEncoder(csvLineEncoderOptions).transform())\n    .pipeTo(new streams.DownloadStream(downloadName, downloadStreamOptions))\n}"],
  "mappings": "AACA,UAAYA,MAAa,UAEzB,MAAMC,EAAY,SAAS,eAAe,WAAW,EAC/CC,EAAsB,SAAS,eAAe,qBAAqB,EACnEC,EAAsB,SAAS,eAAe,qBAAqB,EACnEC,EAAqB,SAAS,eAAe,oBAAoB,EACjEC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAaD,EAAQ,cAAe,iBAE1CA,EAAQ,SAAW,IAAM,CACvB,GAAI,CAACA,EAAQ,MACX,OAGF,IAAIE,EACCN,EAAU,UACbM,EAAwB,CACtB,WAAAD,CACF,GAGF,MAAME,EAAyB,CAC7B,cAAeN,EAAoB,QACnC,aAAcC,EAAoB,OACpC,EAEMM,EAAwB,CAC5B,UAAWL,EAAmB,QAC1B,IACA,IACJ,YAAa,EACf,EAEMM,EAAeN,EAAmB,QACpC,eACA,eAEJC,EAAQ,MAAO,CAAC,EAAE,OAAO,EACtB,YAAY,IAAIL,EAAQ,iBAAmB,EAC3C,YAAY,IAAIA,EAAQ,iBAAiBQ,CAAsB,EAAE,UAAU,CAAC,EAC5E,YAAY,IAAIR,EAAQ,eAAeS,CAAqB,EAAE,UAAU,CAAC,EACzE,OAAO,IAAIT,EAAQ,eAAeU,EAAcH,CAAqB,CAAC,CAC3E",
  "names": ["streams", "chkDirect", "rdoInputFormatJSONL", "rdoInputFormatJSONC", "rdoOutputFormatCSV", "txtFile", "linkHolder", "downloadStreamOptions", "jsonDeserializeOptions", "csvLineEncoderOptions", "downloadName"]
}
