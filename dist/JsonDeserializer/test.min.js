import{JsonDeserializer as l}from"./JsonDeserializer.min.js";import{SimplePerformanceStreamBuilder as p}from"../PerformanceStream/PerformanceStream.min.js";import{sleep as t}from"../funcs/sleep/sleep.min.js";const s=e=>new ReadableStream({start(o){o.enqueue(e),o.close()}}),a=()=>new WritableStream({write(e){console.log(e)}}),u=()=>new WritableStream,c=async(e,o)=>{const n=new p;await s(e).pipeThrough(n.pipe(r(o)).build()).pipeTo(u()),console.table(n.result())},r=e=>new l(e).transformable(),g=`[	\r
{"a":1,"b":2}	,\r
{"a":3,"b":4\r},{"a":5,"b":6}	,\r
]`,m=`{"a":1,"b"  :2 }
{"a":3	,"b"	:4}\r
{"a":5,"b":6}\r`,b=`[	\r
{"a":1,"b":2/* test
abc*/\r}	,\r
{"a":3,"b":4}, // test
{"a":5,"b":6}	,\r
]`,w=e=>{const o=[];for(let n=0;n<e;++n)o.push('{"a":1,"b":2}');return"["+o.join(",")+"]"},d=e=>{const o=[];for(let n=0;n<e;++n)o.push('{"a":1,"b":2}');return o.join(`
`)},h=e=>{const o=[];for(let n=0;n<e;++n)o.push(`{"a":1/* test
    abc */,"b":2} // test
    `);return"["+o.join(",")+"]"},S=async()=>{console.group("JSON"),await s(g).pipeThrough(r(void 0)).pipeTo(a()),console.groupEnd(),console.group("JSON Lines"),await s(m).pipeThrough(r({lineSeparated:!0})).pipeTo(a()),console.groupEnd(),console.group("JSON with comments"),await s(b).pipeThrough(r({withComments:!0})).pipeTo(a()),console.groupEnd(),await t(),console.group("Performance test");{console.log("count",1e5);const o=w(1e5),n=d(1e5),i=h(1e5);console.group("JSON"),await c(o),console.groupEnd(),await t(),console.group("JSON Lines"),await c(n,{lineSeparated:!0}),console.groupEnd(),await t(),console.group("JSON with comments"),await c(i,{withComments:!0}),console.groupEnd()}console.groupEnd(),await t()};console.group("JsonDeserializer"),await S(),console.groupEnd(),console.log("Test completed.");
//# sourceMappingURL=test.min.js.map
