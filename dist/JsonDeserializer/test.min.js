import{JsonDeserializer as p}from"./JsonDeserializer.min.js";import{sleep as t}from"../funcs/sleep/sleep.min.js";const a=e=>new ReadableStream({start(o){o.enqueue(e),o.close()}}),s=()=>new WritableStream({write(e){console.log(e)}}),c=()=>new WritableStream,i=async e=>{performance.clearMarks("start"),performance.clearMarks("end"),performance.clearMeasures("perf"),performance.mark("start"),await e(),performance.mark("end"),performance.measure("perf","start","end");const o=performance.getEntriesByName("perf")[0];console.log(o.duration)},r=async e=>new p(e).transform(),l=`[	\r
{"a":1,"b":2}	,\r
{"a":3,"b":4},{"a":5,"b":6}	,\r
]`,u=`{"a":1,"b":2}
{"a":3	,"b":4}\r
{"a":5,"b":6}`,g=e=>{const o=[];for(let n=0;n<e;++n)o.push('{"a":1,"b":2}');return"["+o.join(",")+"]"},m=e=>{const o=[];for(let n=0;n<e;++n)o.push('{"a":1,"b":2}');return o.join(`
`)},w=async()=>{console.group("JSON"),await a(l).pipeThrough(await r(void 0)).pipeTo(s()),console.groupEnd(),console.group("JSON Lines"),await a(u).pipeThrough(await r({lineSeparated:!0})).pipeTo(s()),console.groupEnd(),await t(0),console.group("Performance test");{console.log("count",1e5);const o=g(1e5),n=m(1e5);console.group("JSON"),await i(async()=>{await a(o).pipeThrough(await r(void 0)).pipeTo(c())}),console.groupEnd(),await t(0),console.group("JSON Lines"),await i(async()=>{await a(n).pipeThrough(await r({lineSeparated:!0})).pipeTo(c())}),console.groupEnd()}console.groupEnd(),await t(0)};console.group("JsonDeserializer"),await w(),console.groupEnd(),console.log("Test completed.");
//# sourceMappingURL=test.min.js.map
