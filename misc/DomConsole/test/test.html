<!DOCTYPE html>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" href="../DomConsole.css">
<title>Testing ConsoleRedirector</title>
<div style="position: sticky; top: 0; background-color: white;">
  <fieldset>
    <legend>Logging</legend>
    <button id="log">log</button>
    <button id="trace">trace</button>
    <button id="debug">debug</button>
    <button id="info">info</button>
    <button id="warn">warn</button>
    <button id="error">error</button>
    <button id="assert">assert</button>
  </fieldset>
  <fieldset>
    <legend>Table</legend>
    <button id="table">table</button>
  </fieldset>
  <fieldset>
    <legend>Grouping</legend>
    <button id="group">group</button>
    <button id="groupCollapsed">groupCollapsed</button>
    <button id="groupEnd">groupEnd</button>
  </fieldset>
  <fieldset>
    <legend>Clear</legend>
    <button id="clear">clear</button>
  </fieldset>
</div>
<div id="owner"></div>
<script type="module">
  import { DomConsole } from "../DomConsole.mjs"

  const owner = document.getElementById("owner")
  const console = new DomConsole(owner)

  function output(func, ...data) {
    globalThis.console[func](...data)
    console[func](...data)
    scrollTo(0, document.documentElement.scrollHeight - document.documentElement.clientHeight)
  }
  function assert(condition, ...data) {
    globalThis.console.assert(condition, ...data)
    console.assert(condition, ...data)
    scrollTo(0, document.documentElement.scrollHeight - document.documentElement.clientHeight)
  }

  document.getElementById("log").onclick = () => {
    output("log", "invoke log.")
    output("log", "invoke", "log")
    output("log", "invoke log.", [1, 2, 3])
    output("log", [1, 2, 3])
  }
  document.getElementById("trace").onclick = () => output("trace", "invoke trace.", [1, 2, 3])
  document.getElementById("debug").onclick = () => output("debug", "invoke debug.", [1, 2, 3])
  document.getElementById("info").onclick = () => output("info", "invoke info.", [1, 2, 3])
  document.getElementById("warn").onclick = () => output("warn", "invoke warn.", [1, 2, 3])
  document.getElementById("error").onclick = () => {
    output("error", "invoke error.", [1, 2, 3])
    output("error", "invoke error.", { a: 1, b: 2, c: 3 })
    output("error", "aa", "bb", { a: 1, b: 2 }, [1, 2, 3, { a: [1, 2, 3] }])
  }
  document.getElementById("assert").onclick = () => {
    assert(true)
    assert(true, [1, 2, 3])
    assert(false)
    assert(false, [1, 2, 3])
  }

  document.getElementById("table").onclick = () => {
    output("table", { a: 1, b: 2, c: 3 })
    output("table", [{ a: 1, b: 2, c: 3 }, { a: 1, b: 2, c: 3 }])
    output("table", [{ a: 1, b: 2, c: 3 }, { a: 1, b: 2, c: 3 }], ["a", "c"])
    output("table", [{ a: 1, b: 2, c: 3 }, { a: 1, b: 2, c: 3 }], "a", "c")
  }

  document.getElementById("group").onclick = () => {
    output("group", "invoke group.", [1, 2, 3])
  }
  document.getElementById("groupCollapsed").onclick = () => {
    output("groupCollapsed", "invoke groupCollapsed.", [1, 2, 3])
  }
  document.getElementById("groupEnd").onclick = () => output("groupEnd")

  document.getElementById("clear").onclick = () => output("clear")
</script>